<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì‰½ë‹¤ì‰¬ì›Œ! ìš”ë¦¬ì™• - ìŒì„± ì±—ë´‡</title>
</head>
<body>
  <h2>ğŸ³ ì‰½ë‹¤ì‰¬ì›Œ! ìš”ë¦¬ì™• - í˜¼ë°¥ì¡±ì„ ìœ„í•œ í•¸ì¦ˆí”„ë¦¬ ìš”ë¦¬ ë„ìš°ë¯¸</h2>

  <!-- DialogFlow ì±—ë´‡ -->
  <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
  <df-messenger
    intent="WELCOME"
    chat-title="ì‰½ë‹¤ì‰¬ì›Œ!ìš”ë¦¬ì™•"
    agent-id="fd70106c-4863-4636-ab90-13920c96c85c"
    language-code="ko"
  ></df-messenger>

  <!-- ìŒì„± ì…ë ¥ ë²„íŠ¼ (í˜ì´ì§€ í•˜ë‹¨ ê³ ì •) -->
  <script>
    if ('webkitSpeechRecognition' in window) {
      const recognition = new webkitSpeechRecognition();
      recognition.lang = 'ko-KR';

      const micBtn = document.createElement('button');
      micBtn.innerText = 'ğŸ¤ ë§í•˜ê¸°';
      micBtn.style.position = 'fixed';
      micBtn.style.bottom = '20px';
      micBtn.style.left = '20px';
      micBtn.style.zIndex = '9999';
      micBtn.style.padding = '10px';
      micBtn.style.borderRadius = '20px';
      micBtn.style.border = 'none';
      micBtn.style.background = '#4285F4';
      micBtn.style.color = 'white';
      micBtn.style.fontSize = '16px';
      document.body.appendChild(micBtn);

      micBtn.onclick = () => recognition.start();

      recognition.onresult = function (event) {
        const result = event.results[0][0].transcript;

        const input = document.querySelector('df-messenger')
          ?.shadowRoot?.querySelector('df-messenger-chat')
          ?.shadowRoot?.querySelector('input');

        if (input) {
          input.value = result;
          input.dispatchEvent(new KeyboardEvent('keydown', { key: 'Enter' }));
        } else {
          alert("ì±—ë´‡ ì…ë ¥ì°½ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
      };
    } else {
      alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í¬ë¡¬ì„ ì‚¬ìš©í•˜ì„¸ìš”.");
    }
  </script>
</body>
</html>

